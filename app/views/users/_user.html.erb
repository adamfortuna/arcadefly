<%- parent ||= :user -%>

<li class="<%= cycle("even","odd")%>">
  <% if logged_in? && current_user.administrator? -%>
  <ul class="left-shift admin">
    <li><%= link_to 'Edit', edit_user_path(user), :class => 'admin' %></li>
    <li><%= link_to 'Destroy', user_path(user), :class => 'admin', :confirm => 'Are you sure?', :method => :delete %></li>
  </ul>
  <% end %>

	<%= link_to(user.login, user_path(user), :class => 'main' ) %>
	
	<span class="count">
	  <% if parent == :user %>
	    <% if user.has_address? %>Lives in <%= user.address.short_line %><% end %>
	  <% elsif parent == :arcade %>
	    <%= pluralize(user.frequentships_count, "favorite arcade") %>
	  <% elsif parent == :game %>
	    <%= pluralize(user.favoriteships_count, "favorite games") %>
	  <% end %>
	
  	<span class="favorite">
  	  <% if logged_in? && current_user.id != user.id %>
  	    <% if current_user.friended?(user) || current_user.following?(user) %>
  	      <%= link_to "&nbsp;", user_friends_path(user)+'/'+user.to_param, { :method => "delete", :class => "favorite user_delete" } %>
  	    <% else %>
          <%= link_to "&nbsp;", user_friends_path(user), { :method => "post", :class => "favorite user_add" } %>
  	    <% end %>
  	  <% end %>
  	</span>
  </span>
</li>