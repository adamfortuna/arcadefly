<% title "Games" -%>

<% box do %>
  <h2>Games <%= separator + params[:search] unless params[:search].blank? %></h2>

  <%- if params[:search].nil? -%>
    <div><strong>Want to see only popular games?</strong> Check out which games have been <%= link_to "favorited by the most players", popular_games_path %>!</div>
  <%- end -%>

  <% cache do %>
  <div id="controller_search">
    <% form_for(:game, games_path, :html => { :method => 'get' }) do |f| %>
      <label id="search_label" for="search">Search for a Game...</label>
      <%= text_field_tag :search, '', { :class => 'text', :onfocus => 'toggleLabel("search", false);', :onblur => 'toggleLabel("search", true);' } %>  
      <%= submit_tag "Search!", { :disable_with => 'Searching...' } %>
    <% end %>
  </div>

  <%= render :partial => 'shared/letters', :locals => { :controller => 'games' } %>
  <% end %>

  <%= render :partial => 'games/games', :object => @games %>
<% end %>