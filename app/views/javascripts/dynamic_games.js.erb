// javascripts/dynamic_regions.js.erb
var games = new Array();
<% for game in @games -%>
  games.push(new Array(<%= game.id %>, '<%=h game.playables_count %>'));
<% end -%>

function showAllGames() {
  games.each(function(game) {
    $('game_' + game[0] + '_field').show();
  });
  $('show_all_games').hide();
  $('show_popular_games').show();
}

function showPopularGames() {
  games.each(function(game) {
    if (game[1] == 0) {
      $('game_' + game[0] + '_field').hide();
    } else {
      $('game_' + game[0] + '_field').show();
    }
  });
  $('show_all_games').show();
  $('show_popular_games').hide();
}

document.observe('dom:loaded', function() {
  showPopularGames();
});